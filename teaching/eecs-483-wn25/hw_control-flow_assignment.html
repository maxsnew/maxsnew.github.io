<!doctype HTML>
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Assignment 2: Control Flow</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="footnote.css" title="default"/><link rel="stylesheet" type="text/css" href="screen.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--><script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script><script>$.noConflict();</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [ ["$","$"], ["\\(","\\)"] ],
    displayMath: [ ["$$","$$"],
                   ["\\[","\\]"],
                   ["\\begin{equation}","\\end{equation}"],
                   ["\\begin{equation*}","\\end{equation*}"] ],
    processEscapes: true
  },
  "HTML-CSS": {
    availableFonts: ["Asana-Math", "STIX", "TeX"],
    webFont: "Asana-Math",
    preferredFont: "Asana-Math",
    imageFont: null,
    mtexFontInherit: true
  }
});</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script src="codemirror.js"></script><script src="runmode.js"></script><script src="scheme.js"></script><script src="mllike.js"></script><script src="rust.js"></script><script src="haskell.js"></script><script src="clike.js"></script><script src="javascript.js"></script><script src="asm86.js"></script><script src="asm64.js"></script><script src="shell.js"></script><script src="python.js"></script><script src="makefile-mode.js"></script><script src="setup-cm.js"></script></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x"><span class="AssignmentNum">Assignment 2:</span> Control Flow</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.The_.Boa_.Language%29" class="tocviewlink" data-pltdoc="x">The Boa Language</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.Compiler_.Passes%29" class="tocviewlink" data-pltdoc="x">Compiler Passes</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._.Starter_.Code%29" class="tocviewlink" data-pltdoc="x">Starter Code</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#%28part._.List_of_.Deliverables%29" class="tocviewlink" data-pltdoc="x">List of Deliverables</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="#%28part._.Grading_.Standards%29" class="tocviewlink" data-pltdoc="x">Grading Standards</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="#%28part._.Submission%29" class="tocviewlink" data-pltdoc="x">Submission</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._%29" class="tocsubseclink" data-pltdoc="x"><span class="AssignmentNum">Assignment 2:</span> Control Flow</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.The_.Boa_.Language%29" class="tocsubseclink" data-pltdoc="x">The Boa Language</a></td></tr><tr><td><span class="tocsublinknumber">1.1<tt>&nbsp;</tt></span><a href="#%28part._.Concrete_.Syntax%29" class="tocsubseclink" data-pltdoc="x">Concrete Syntax</a></td></tr><tr><td><span class="tocsublinknumber">1.2<tt>&nbsp;</tt></span><a href="#%28part._.Semantics%29" class="tocsubseclink" data-pltdoc="x">Semantics</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.Compiler_.Passes%29" class="tocsubseclink" data-pltdoc="x">Compiler Passes</a></td></tr><tr><td><span class="tocsublinknumber">2.1<tt>&nbsp;</tt></span><a href="#%28part._.Well-formedness_checking%29" class="tocsubseclink" data-pltdoc="x">Well-<wbr></wbr>formedness checking</a></td></tr><tr><td><span class="tocsublinknumber">2.2<tt>&nbsp;</tt></span><a href="#%28part._.Lowering_.To_.S.S.A%29" class="tocsubseclink" data-pltdoc="x">Lowering To SSA</a></td></tr><tr><td><span class="tocsublinknumber">2.3<tt>&nbsp;</tt></span><a href="#%28part._.Code_.Generation%29" class="tocsubseclink" data-pltdoc="x">Code Generation</a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._.Starter_.Code%29" class="tocsubseclink" data-pltdoc="x">Starter Code</a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#%28part._.List_of_.Deliverables%29" class="tocsubseclink" data-pltdoc="x">List of Deliverables</a></td></tr><tr><td><span class="tocsublinknumber">5<tt>&nbsp;</tt></span><a href="#%28part._.Grading_.Standards%29" class="tocsubseclink" data-pltdoc="x">Grading Standards</a></td></tr><tr><td><span class="tocsublinknumber">6<tt>&nbsp;</tt></span><a href="#%28part._.Submission%29" class="tocsubseclink" data-pltdoc="x">Submission</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="versionNoNav">8.15</span></div><h2 class="heading"><a name="(part._)"></a><span class="AssignmentNum">Assignment 2:</span> Control Flow<span class="button-group"><a href="#(part._)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h2><p><h4 class="due">Due: Fri 02/14 at 11:59pm</h4></p><p><p class="git-clone"><code><span class="kw">git clone </span><input onclick="this.select();" readonly="readonly" value="https://gitlab.eecs.umich.edu/483-wn25/control-flow"/></code></p></p><p><span class="emph">In this assignment, we extend our previous compiler with
additional mechanisms for complex control flow: conditional
statements, and a limited form of functions that can only be invoked
by a tail call.</span></p><h3 class="heading">1<tt>&nbsp;</tt><a name="(part._.The_.Boa_.Language)"></a>The Boa Language<span class="button-group"><a href="#(part._.The_.Boa_.Language)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h3><h4 class="heading">1.1<tt>&nbsp;</tt><a name="(part._.Concrete_.Syntax)"></a>Concrete Syntax<span class="button-group"><a href="#(part._.Concrete_.Syntax)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h4><blockquote class="SCodeFlow" style="white-space: pre;"><p><a name="(elem._(bnf-prod._(.Boa._prog)))"></a><span class="bnf-rule">&#8249;prog&#8250;</span><span class="bnf-meta">:</span> <span class="bnf-lit">def</span> <span class="bnf-lit">main</span> <span class="bnf-lit">(</span> <span class="bnf-lit bnf-unknown">IDENTIFIER</span> <span class="bnf-lit">)</span> <span class="bnf-lit">:</span> <span class=""><a href="#%28elem._%28bnf-prod._%28.Boa._expr%29%29%29" data-pltdoc="x">&#8249;expr&#8250;</a></span>
<a name="(elem._(bnf-prod._(.Boa._expr)))"></a><span class="bnf-rule">&#8249;expr&#8250;</span><span class="bnf-meta">:</span> 
          <span class="bnf-meta"> | </span><span class="bnf-lit">let</span> <span class=""><a href="#%28elem._%28bnf-prod._%28.Boa._bindings%29%29%29" data-pltdoc="x">&#8249;bindings&#8250;</a></span> <span class="bnf-lit">in</span> <span class=""><a href="#%28elem._%28bnf-prod._%28.Boa._expr%29%29%29" data-pltdoc="x">&#8249;expr&#8250;</a></span>
          <span class="bnf-meta"> | </span><span class="bnf-lit">if</span> <span class=""><a href="#%28elem._%28bnf-prod._%28.Boa._expr%29%29%29" data-pltdoc="x">&#8249;expr&#8250;</a></span> <span class="bnf-lit">:</span> <span class=""><a href="#%28elem._%28bnf-prod._%28.Boa._expr%29%29%29" data-pltdoc="x">&#8249;expr&#8250;</a></span> <span class="bnf-lit">else:</span> <span class=""><a href="#%28elem._%28bnf-prod._%28.Boa._expr%29%29%29" data-pltdoc="x">&#8249;expr&#8250;</a></span>
          <span class="bnf-meta"> | </span><span class=""><a href="#%28elem._%28bnf-prod._%28.Boa._decls%29%29%29" data-pltdoc="x">&#8249;decls&#8250;</a></span> <span class="bnf-lit">in</span> <span class=""><a href="#%28elem._%28bnf-prod._%28.Boa._expr%29%29%29" data-pltdoc="x">&#8249;expr&#8250;</a></span>
          <span class="bnf-meta"> | </span><span class=""><a href="#%28elem._%28bnf-prod._%28.Boa._binop-expr%29%29%29" data-pltdoc="x">&#8249;binop-expr&#8250;</a></span>
<a name="(elem._(bnf-prod._(.Boa._binop-expr)))"></a><span class="bnf-rule">&#8249;binop-expr&#8250;</span><span class="bnf-meta">:</span> 
                      <span class="bnf-meta"> | </span><span class="bnf-lit bnf-unknown">IDENTIFIER</span>
                      <span class="bnf-meta"> | </span><span class="bnf-lit bnf-unknown">NUMBER</span>
                      <span class="bnf-meta"> | </span><span class="bnf-lit">true</span>
                      <span class="bnf-meta"> | </span><span class="bnf-lit">false</span>
                      <span class="bnf-meta"> | </span><span class="bnf-lit">!</span> <span class=""><a href="#%28elem._%28bnf-prod._%28.Boa._binop-expr%29%29%29" data-pltdoc="x">&#8249;binop-expr&#8250;</a></span>
                      <span class="bnf-meta"> | </span><span class=""><a href="#%28elem._%28bnf-prod._%28.Boa._prim1%29%29%29" data-pltdoc="x">&#8249;prim1&#8250;</a></span> <span class="bnf-lit">(</span> <span class=""><a href="#%28elem._%28bnf-prod._%28.Boa._expr%29%29%29" data-pltdoc="x">&#8249;expr&#8250;</a></span> <span class="bnf-lit">)</span>
                      <span class="bnf-meta"> | </span><span class=""><a href="#%28elem._%28bnf-prod._%28.Boa._expr%29%29%29" data-pltdoc="x">&#8249;expr&#8250;</a></span> <span class=""><a href="#%28elem._%28bnf-prod._%28.Boa._prim2%29%29%29" data-pltdoc="x">&#8249;prim2&#8250;</a></span> <span class=""><a href="#%28elem._%28bnf-prod._%28.Boa._expr%29%29%29" data-pltdoc="x">&#8249;expr&#8250;</a></span>
                      <span class="bnf-meta"> | </span><span class="bnf-lit bnf-unknown">IDENTIFIER</span> <span class="bnf-lit">(</span> <span class=""><a href="#%28elem._%28bnf-prod._%28.Boa._exprs%29%29%29" data-pltdoc="x">&#8249;exprs&#8250;</a></span> <span class="bnf-lit">)</span>
                      <span class="bnf-meta"> | </span><span class="bnf-lit bnf-unknown">IDENTIFIER</span> <span class="bnf-lit">(</span> <span class="bnf-lit">)</span>
                      <span class="bnf-meta"> | </span><span class="bnf-lit">(</span> <span class=""><a href="#%28elem._%28bnf-prod._%28.Boa._expr%29%29%29" data-pltdoc="x">&#8249;expr&#8250;</a></span> <span class="bnf-lit">)</span>
<a name="(elem._(bnf-prod._(.Boa._prim1)))"></a><span class="bnf-rule">&#8249;prim1&#8250;</span><span class="bnf-meta">:</span> 
            <span class="bnf-meta"> | </span><span class="bnf-lit">add1</span><span class="bnf-meta"> | </span><span class="bnf-lit">sub1</span>
<a name="(elem._(bnf-prod._(.Boa._prim2)))"></a><span class="bnf-rule">&#8249;prim2&#8250;</span><span class="bnf-meta">:</span> 
            <span class="bnf-meta"> | </span><span class="bnf-lit">+</span><span class="bnf-meta"> | </span><span class="bnf-lit">-</span><span class="bnf-meta"> | </span><span class="bnf-lit">*</span>
            <span class="bnf-meta"> | </span><span class="bnf-lit">&lt;</span><span class="bnf-meta"> | </span><span class="bnf-lit">&gt;</span><span class="bnf-meta"> | </span><span class="bnf-lit">&lt;=</span><span class="bnf-meta"> | </span><span class="bnf-lit">&gt;=</span>
            <span class="bnf-meta"> | </span><span class="bnf-lit">==</span>
            <span class="bnf-meta"> | </span><span class="bnf-lit">&amp;&amp;</span><span class="bnf-meta"> | </span><span class="bnf-lit">||</span>
<a name="(elem._(bnf-prod._(.Boa._decls)))"></a><span class="bnf-rule">&#8249;decls&#8250;</span><span class="bnf-meta">:</span> 
            <span class="bnf-meta"> | </span><span class=""><a href="#%28elem._%28bnf-prod._%28.Boa._decls%29%29%29" data-pltdoc="x">&#8249;decls&#8250;</a></span> <span class="bnf-lit">and</span> <span class=""><a href="#%28elem._%28bnf-prod._%28.Boa._decl%29%29%29" data-pltdoc="x">&#8249;decl&#8250;</a></span>
            <span class="bnf-meta"> | </span><span class=""><a href="#%28elem._%28bnf-prod._%28.Boa._decl%29%29%29" data-pltdoc="x">&#8249;decl&#8250;</a></span>
<a name="(elem._(bnf-prod._(.Boa._decl)))"></a><span class="bnf-rule">&#8249;decl&#8250;</span><span class="bnf-meta">:</span> 
          <span class="bnf-meta"> | </span><span class="bnf-lit">def</span> <span class="bnf-lit bnf-unknown">IDENTIFIER</span> <span class="bnf-lit">(</span> <span class=""><a href="#%28elem._%28bnf-prod._%28.Boa._ids%29%29%29" data-pltdoc="x">&#8249;ids&#8250;</a></span> <span class="bnf-lit">)</span> <span class="bnf-lit">:</span> <span class=""><a href="#%28elem._%28bnf-prod._%28.Boa._expr%29%29%29" data-pltdoc="x">&#8249;expr&#8250;</a></span>
          <span class="bnf-meta"> | </span><span class="bnf-lit">def</span> <span class="bnf-lit bnf-unknown">IDENTIFIER</span> <span class="bnf-lit">(</span> <span class="bnf-lit">)</span> <span class="bnf-lit">:</span> <span class=""><a href="#%28elem._%28bnf-prod._%28.Boa._expr%29%29%29" data-pltdoc="x">&#8249;expr&#8250;</a></span>
<a name="(elem._(bnf-prod._(.Boa._ids)))"></a><span class="bnf-rule">&#8249;ids&#8250;</span><span class="bnf-meta">:</span> 
        <span class="bnf-meta"> | </span><span class="bnf-lit bnf-unknown">IDENTIFIER</span>
        <span class="bnf-meta"> | </span><span class="bnf-lit bnf-unknown">IDENTIFIER</span> <span class="bnf-lit">,</span> <span class=""><a href="#%28elem._%28bnf-prod._%28.Boa._ids%29%29%29" data-pltdoc="x">&#8249;ids&#8250;</a></span>
<a name="(elem._(bnf-prod._(.Boa._exprs)))"></a><span class="bnf-rule">&#8249;exprs&#8250;</span><span class="bnf-meta">:</span> 
            <span class="bnf-meta"> | </span><span class=""><a href="#%28elem._%28bnf-prod._%28.Boa._expr%29%29%29" data-pltdoc="x">&#8249;expr&#8250;</a></span>
            <span class="bnf-meta"> | </span><span class=""><a href="#%28elem._%28bnf-prod._%28.Boa._expr%29%29%29" data-pltdoc="x">&#8249;expr&#8250;</a></span> <span class="bnf-lit">,</span> <span class=""><a href="#%28elem._%28bnf-prod._%28.Boa._exprs%29%29%29" data-pltdoc="x">&#8249;exprs&#8250;</a></span>
<a name="(elem._(bnf-prod._(.Boa._bindings)))"></a><span class="bnf-rule">&#8249;bindings&#8250;</span><span class="bnf-meta">:</span> 
                  <span class="bnf-meta"> | </span><span class="bnf-lit bnf-unknown">IDENTIFIER</span> <span class="bnf-lit">=</span> <span class=""><a href="#%28elem._%28bnf-prod._%28.Boa._expr%29%29%29" data-pltdoc="x">&#8249;expr&#8250;</a></span>
                  <span class="bnf-meta"> | </span><span class="bnf-lit bnf-unknown">IDENTIFIER</span> <span class="bnf-lit">=</span> <span class=""><a href="#%28elem._%28bnf-prod._%28.Boa._expr%29%29%29" data-pltdoc="x">&#8249;expr&#8250;</a></span> <span class="bnf-lit">,</span> <span class=""><a href="#%28elem._%28bnf-prod._%28.Boa._bindings%29%29%29" data-pltdoc="x">&#8249;bindings&#8250;</a></span></p></blockquote><h4 class="heading">1.2<tt>&nbsp;</tt><a name="(part._.Semantics)"></a>Semantics<span class="button-group"><a href="#(part._.Semantics)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h4><p>The semantics of functions and if expressions are as discussed in
class and implemented in the provided interpreters. If you have
questions about the semantics, ask for clarification on Piazza.</p><p>The semantics of boolean constants is that <span title="Boa" class="sourceCode"><code data-lang="text/x-snake" class="sourceCode">true</code></span> is an alias for
<span title="SSA" class="sourceCode"><code data-lang="text/x-snake" class="sourceCode">1</code></span> and <span title="Boa" class="sourceCode"><code data-lang="text/x-snake" class="sourceCode">false</code></span> is an alias for <span title="SSA" class="sourceCode"><code data-lang="text/x-snake" class="sourceCode">0</code></span>. All non-zero integers
are considered to represent the boolean <span title="Boa" class="sourceCode"><code data-lang="text/x-snake" class="sourceCode">true</code></span> while only <span title="Boa" class="sourceCode"><code data-lang="text/x-snake" class="sourceCode">0</code></span>
represents <span title="Boa" class="sourceCode"><code data-lang="text/x-snake" class="sourceCode">false</code></span>. The logical operators of negation (<span title="Boa" class="sourceCode"><code data-lang="text/x-snake" class="sourceCode">!</code></span>),
conjunction (<span title="Boa" class="sourceCode"><code data-lang="text/x-snake" class="sourceCode">&amp;&amp;</code></span>) and disjunction (<span title="Boa" class="sourceCode"><code data-lang="text/x-snake" class="sourceCode">||</code></span>) are all allowed to
take arbitrary integers as inputs, but always return either <span title="Boa" class="sourceCode"><code data-lang="text/x-snake" class="sourceCode">0</code></span> or
<span title="Boa" class="sourceCode"><code data-lang="text/x-snake" class="sourceCode">1</code></span>.</p><p>Comparison operations should treat inputs as integers and produce
boolean balues (<span title="SSA" class="sourceCode"><code data-lang="text/x-snake" class="sourceCode">1</code></span> or <span title="SSA" class="sourceCode"><code data-lang="text/x-snake" class="sourceCode">0</code></span>).</p><h3 class="heading">2<tt>&nbsp;</tt><a name="(part._.Compiler_.Passes)"></a>Compiler Passes<span class="button-group"><a href="#(part._.Compiler_.Passes)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h3><p>For this compiler you will extend the three passes from before to
account for the new control-flow mechanisms.</p><ul><li><p><span title="Shell" class="sourceCode"><code data-lang="text/x-sh" class="sourceCode">frontend.rs</code></span>: Extend your scope checking to new forms and check that functions are used correctly.</p></li><li><p><span title="Shell" class="sourceCode"><code data-lang="text/x-sh" class="sourceCode">middle_end.rs</code></span>: Extend your lowering pass to handle boolean values, new operators, conditionals and function definitions</p></li><li><p><span title="Shell" class="sourceCode"><code data-lang="text/x-sh" class="sourceCode">backend.rs</code></span>: Extend your code generation to handle sub-blocks, branching and coercions.</p></li></ul><h4 class="heading">2.1<tt>&nbsp;</tt><a name="(part._.Well-formedness_checking)"></a>Well-formedness checking<span class="button-group"><a href="#(part._.Well-formedness_checking)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h4><p>We extend our previous notion of scope with a new mechanism for
defining variables: local function definitions.</p><p><p>This adds several new types of compile-time errors with functions:
</p><ul><li><p>A function being called that was not declared</p></li><li><p>Mutually recursively defined functions with the same name</p></li><li><p>A function having multiple parameters with the same name</p></li><li><p>A function being called with the wrong number of arguments</p></li><li><p>A function being called in a non-tail position.</p></li></ul></p><h4 class="heading">2.2<tt>&nbsp;</tt><a name="(part._.Lowering_.To_.S.S.A)"></a>Lowering To SSA<span class="button-group"><a href="#(part._.Lowering_.To_.S.S.A)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h4><p>The new SSA form has full support for parameterized blocks as well as
operations for implementing integer to boolean coercions and logical
and comparison operations. We include primitives for bitwise and
<span title="SSA" class="sourceCode"><code data-lang="text/x-snake" class="sourceCode">and</code></span>, <span title="SSA" class="sourceCode"><code data-lang="text/x-snake" class="sourceCode">or</code></span> and <span title="SSA" class="sourceCode"><code data-lang="text/x-snake" class="sourceCode">xor</code></span>, as well as a coercion from integers
to booleans which is useful for correctly implementing logical
operators.</p><p>Additionally, we have updated the <span title="Rust" class="sourceCode"><code data-lang="text/x-rustsrc" class="sourceCode">Continuation</code></span> type to be an
enum: either a block of code with an input variable, or a
<span title="Rust" class="sourceCode"><code data-lang="text/x-rustsrc" class="sourceCode">Return</code></span>. The <span title="Rust" class="sourceCode"><code data-lang="text/x-rustsrc" class="sourceCode">Return</code></span> continuation indicates the
continuation is trivial, and therefore the expression is in tail
position. If you have correctly ruled out non-tail calls in
<span title="Shell" class="sourceCode"><code data-lang="text/x-sh" class="sourceCode">frontend.rs</code></span>, you should never have a call with a non
<span title="Rust" class="sourceCode"><code data-lang="text/x-rustsrc" class="sourceCode">Return</code></span> continuation. Additionally, if a conditional has a
<span title="Rust" class="sourceCode"><code data-lang="text/x-rustsrc" class="sourceCode">Return</code></span> continuation, you need not generate a join point for it.</p><h4 class="heading">2.3<tt>&nbsp;</tt><a name="(part._.Code_.Generation)"></a>Code Generation<span class="button-group"><a href="#(part._.Code_.Generation)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h4><p><p>Most of the work is in compiling to SSA, but there are a few things to keep in mind for code generation:
</p><ul><li><p>As discussed in February 3 lecture, make sure that branch with arguments don&rsquo;t overwrite temporaries.</p></li><li><p>The <span title="X64 Assembly" class="sourceCode"><code data-lang="text/x-asm64" class="sourceCode">setcc</code></span> operation uses 8-bit registers, these are added in <span title="Shell" class="sourceCode"><code data-lang="text/x-sh" class="sourceCode">asm.rs</code></span> as <span title="Rust" class="sourceCode"><code data-lang="text/x-rustsrc" class="sourceCode">Reg8</code></span>.</p></li></ul></p><h3 class="heading">3<tt>&nbsp;</tt><a name="(part._.Starter_.Code)"></a>Starter Code<span class="button-group"><a href="#(part._.Starter_.Code)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h3><p>You are provided with starter code as before that provides a runner
script, a parser, printing for assembly code, as well as type
definitions for the ASTs, SSA form and Assembly code.</p><p>Much of your implementation from assignment 1 will still be useful for
assignment 2, but will need to be refactored and extended accordingly
with new features. You are free to use your solution for assignment 1
as a starting point, but we also provide a reference solution for
assignment 1 on the
<a href="https://gitlab.eecs.umich.edu/483-wn25/straightline-code-solution">gitlab</a>. You
should have received an invitation to a private gitlab group that
gives you access to this reference solution.</p><h3 class="heading">4<tt>&nbsp;</tt><a name="(part._.List_of_.Deliverables)"></a>List of Deliverables<span class="button-group"><a href="#(part._.List_of_.Deliverables)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h3><p>For this assignment you will submit your updated versions of three
files:</p><ul><li><p>src/frontend.rs</p></li><li><p>src/middle_end.rs</p></li><li><p>src/backend.rs</p></li></ul><p>These are the only files that you can change in your submission, your
code will be linked with reference versions of the other files.</p><p>We&rsquo;ve included a script <span title="Shell" class="sourceCode"><code data-lang="text/x-sh" class="sourceCode">mk_submission.sh</code></span> in the starter code
repo that should make zip file with just those three files and your
testing files that you should upload to gradescope. The testing files
are included for us to get some idea of how students are testing their
code, they are not graded.</p><h3 class="heading">5<tt>&nbsp;</tt><a name="(part._.Grading_.Standards)"></a>Grading Standards<span class="button-group"><a href="#(part._.Grading_.Standards)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h3><p>For this assignment, you will be autograded on whether your code
implements the specification (functional correctness). We encourage
you to test but your test coverage is not graded.</p><h3 class="heading">6<tt>&nbsp;</tt><a name="(part._.Submission)"></a>Submission<span class="button-group"><a href="#(part._.Submission)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h3><p><p><span style="font-weight: bold">Wait!</span> Please read the assignment again and verify that you have not forgotten anything!</p></p><p>Please submit your homework on gradescope by the above deadline.</p><a name="(part._(gentag._4._assignmentcontrol-flow))"></a><p class="FootnoteBlock"></p></div></div><div id="contextindicator">&nbsp;</div></body></html>